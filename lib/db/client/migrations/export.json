[
  {
    "sql": [
      "DO $$ BEGIN\n CREATE TYPE \"public\".\"invitationStatus\" AS ENUM('pending', 'accepted', 'rejected');\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n",
      "\nDO $$ BEGIN\n CREATE TYPE \"public\".\"role\" AS ENUM('OWNER', 'ADMIN', 'USER');\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n",
      "\nCREATE TABLE IF NOT EXISTS \"expense_shares\" (\n\t\"id\" serial PRIMARY KEY NOT NULL,\n\t\"expense_id\" integer,\n\t\"user_id\" integer NOT NULL,\n\t\"group_id\" integer,\n\t\"share_amount\" integer NOT NULL,\n\t\"created_at\" timestamp DEFAULT now() NOT NULL,\n\t\"updated_at\" timestamp DEFAULT now() NOT NULL\n);\n",
      "\nCREATE TABLE IF NOT EXISTS \"expenses\" (\n\t\"id\" serial PRIMARY KEY NOT NULL,\n\t\"description\" varchar(255) NOT NULL,\n\t\"type\" varchar(255) DEFAULT 'misc' NOT NULL,\n\t\"amount\" integer NOT NULL,\n\t\"payer_id\" integer NOT NULL,\n\t\"group_id\" integer,\n\t\"created_at\" timestamp DEFAULT now() NOT NULL,\n\t\"updated_at\" timestamp DEFAULT now() NOT NULL\n);\n",
      "\nCREATE TABLE IF NOT EXISTS \"groups\" (\n\t\"id\" serial PRIMARY KEY NOT NULL,\n\t\"name\" varchar(255) NOT NULL,\n\t\"description\" text,\n\t\"created_at\" timestamp DEFAULT now() NOT NULL,\n\t\"updated_at\" timestamp DEFAULT now() NOT NULL\n);\n",
      "\nCREATE TABLE IF NOT EXISTS \"invitations\" (\n\t\"id\" serial PRIMARY KEY NOT NULL,\n\t\"user_id\" integer NOT NULL,\n\t\"invited_by\" integer NOT NULL,\n\t\"group_id\" integer NOT NULL,\n\t\"role\" \"role\" DEFAULT 'USER' NOT NULL,\n\t\"status\" \"invitationStatus\" DEFAULT 'pending' NOT NULL,\n\t\"created_at\" timestamp DEFAULT now(),\n\t\"updated_at\" timestamp DEFAULT now()\n);\n",
      "\nCREATE TABLE IF NOT EXISTS \"users_groups\" (\n\t\"id\" serial PRIMARY KEY NOT NULL,\n\t\"user_id\" integer NOT NULL,\n\t\"group_id\" integer NOT NULL,\n\t\"role\" \"role\" DEFAULT 'USER' NOT NULL,\n\t\"created_at\" timestamp DEFAULT now() NOT NULL\n);\n",
      "\nCREATE TABLE IF NOT EXISTS \"users\" (\n\t\"id\" serial PRIMARY KEY NOT NULL,\n\t\"email\" varchar(255) NOT NULL,\n\t\"phone\" varchar(30) NOT NULL,\n\t\"user_name\" varchar(255) NOT NULL,\n\t\"first_name\" varchar(255) NOT NULL,\n\t\"last_name\" varchar(255) NOT NULL,\n\t\"bio\" text,\n\t\"created_at\" timestamp DEFAULT now() NOT NULL,\n\t\"updated_at\" timestamp DEFAULT now() NOT NULL,\n\tCONSTRAINT \"users_email_unique\" UNIQUE(\"email\"),\n\tCONSTRAINT \"users_phone_unique\" UNIQUE(\"phone\")\n);\n",
      "\nDO $$ BEGIN\n ALTER TABLE \"expense_shares\" ADD CONSTRAINT \"expense_shares_expense_id_expenses_id_fk\" FOREIGN KEY (\"expense_id\") REFERENCES \"public\".\"expenses\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n",
      "\nDO $$ BEGIN\n ALTER TABLE \"expense_shares\" ADD CONSTRAINT \"expense_shares_user_id_users_id_fk\" FOREIGN KEY (\"user_id\") REFERENCES \"public\".\"users\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n",
      "\nDO $$ BEGIN\n ALTER TABLE \"expense_shares\" ADD CONSTRAINT \"expense_shares_group_id_groups_id_fk\" FOREIGN KEY (\"group_id\") REFERENCES \"public\".\"groups\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n",
      "\nDO $$ BEGIN\n ALTER TABLE \"expenses\" ADD CONSTRAINT \"expenses_payer_id_users_id_fk\" FOREIGN KEY (\"payer_id\") REFERENCES \"public\".\"users\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n",
      "\nDO $$ BEGIN\n ALTER TABLE \"expenses\" ADD CONSTRAINT \"expenses_group_id_groups_id_fk\" FOREIGN KEY (\"group_id\") REFERENCES \"public\".\"groups\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n",
      "\nDO $$ BEGIN\n ALTER TABLE \"invitations\" ADD CONSTRAINT \"invitations_user_id_users_id_fk\" FOREIGN KEY (\"user_id\") REFERENCES \"public\".\"users\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n",
      "\nDO $$ BEGIN\n ALTER TABLE \"invitations\" ADD CONSTRAINT \"invitations_invited_by_users_id_fk\" FOREIGN KEY (\"invited_by\") REFERENCES \"public\".\"users\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n",
      "\nDO $$ BEGIN\n ALTER TABLE \"invitations\" ADD CONSTRAINT \"invitations_group_id_groups_id_fk\" FOREIGN KEY (\"group_id\") REFERENCES \"public\".\"groups\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n",
      "\nDO $$ BEGIN\n ALTER TABLE \"users_groups\" ADD CONSTRAINT \"users_groups_user_id_users_id_fk\" FOREIGN KEY (\"user_id\") REFERENCES \"public\".\"users\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n",
      "\nDO $$ BEGIN\n ALTER TABLE \"users_groups\" ADD CONSTRAINT \"users_groups_group_id_groups_id_fk\" FOREIGN KEY (\"group_id\") REFERENCES \"public\".\"groups\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n",
      "\nCREATE UNIQUE INDEX IF NOT EXISTS \"unique_user_invite\" ON \"invitations\" USING btree (\"user_id\",\"group_id\");",
      "\nCREATE UNIQUE INDEX IF NOT EXISTS \"unique_user_group\" ON \"users_groups\" USING btree (\"user_id\",\"group_id\");"
    ],
    "bps": true,
    "folderMillis": 1729613442195,
    "hash": "13c622158c03da28641e0d334f957af2a77df4916446b15426e0c76aa485fcce"
  }
]